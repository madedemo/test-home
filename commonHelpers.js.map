{"version":3,"file":"commonHelpers.js","sources":["../src/script.js"],"sourcesContent":["// localStorage.clear();\n\nconst API_URL_POPULAR = 'https://books-backend.p.goit.global/books/top-books';\n\n// Create .books container in JavaScript\nconst container = document.querySelector('.container');\nconst booksEl = document.createElement('div');\nbooksEl.classList.add('books');\ncontainer.appendChild(booksEl);\n\ngetBooks(API_URL_POPULAR);\n\nasync function getBooks(url) {\n  try {\n    const response = await axios.get(url);\n    const responseData = response.data;\n    console.log('Response Data:', responseData);\n    responseData.forEach(category => {\n      renderCategory(category);\n    });\n  } catch (error) {\n    console.error('Error fetching books:', error);\n  }\n}\n\nfunction renderCategory(category) {\n  const categoryContainer = document.createElement('div');\n  categoryContainer.classList.add('category-container');\n  const categoryEl = document.createElement('div');\n  categoryEl.classList.add('category');\n  categoryEl.textContent = category.list_name;\n  categoryContainer.appendChild(categoryEl);\n  const booksGroup = document.createElement('div');\n  booksGroup.classList.add('books-group');\n  for (let i = 0; i < 5; i++) {\n    if (category.books[i]) {\n      const book = category.books[i];\n      renderBook(booksGroup, book);\n    }\n  }\n  categoryContainer.appendChild(booksGroup);\n  booksEl.appendChild(categoryContainer);\n}\n\nfunction renderBook(booksGroup, book) {\n  const bookEl = document.createElement('div');\n  bookEl.classList.add('book');\n  bookEl.innerHTML = `\n    <div class=\"book__cover-inner\">\n      <img src=\"${book.book_image}\" />\n      <div class=\"book__cover--darkened\"></div>\n    </div>\n    <div class=\"book__info\">\n      <div class=\"book__title\">${book.title}</div>\n      <div class=\"book__author\">${book.author}</div>\n    </div>\n  `;\n  booksGroup.appendChild(bookEl);\n\n  const bookCoverInner = bookEl.querySelector('.book__cover-inner');\n  bookCoverInner.addEventListener('click', () => openBookModal(book._id));\n}\n\n//modal\nconst modalEl = document.querySelector('.modal');\n\nasync function openBookModal(bookId) {\n  try {\n    const bookUrl = `https://books-backend.p.goit.global/books/${bookId}`;\n    const response = await fetch(bookUrl);\n    const bookData = await response.json();\n\n    modalEl.classList.add('modal--show');\n    document.body.classList.add('stop-scrolling');\n\n    modalEl.innerHTML = `\n      <div class=\"modal__card\">\n        <img class=\"modal__book-cover\" src=\"${bookData.book_image}\" alt=\"\">\n        <h2>\n          <span class=\"modal__book-title\">${bookData.title}</span>\n          <span class=\"modal__book-author\"> - ${bookData.author}</span>\n        </h2>\n        <button type=\"button\" class=\"modal__button-action\">${\n          isBookInCart(bookData) ? 'Delete from shopping' : 'Add to shoping'\n        }</button>\n        <button type=\"button\" class=\"modal__button-close\">Закрыть</button>\n      </div>\n    `;\n\n    const btnAction = document.querySelector('.modal__button-action');\n    btnAction.addEventListener('click', () => {\n      if (isBookInCart(bookData)) {\n        removeFromCart(bookData);\n        btnAction.textContent = 'Rem book';\n      } else {\n        addToCart(bookData);\n        btnAction.textContent = 'Add book';\n      }\n    });\n\n    const btnClose = document.querySelector('.modal__button-close');\n    btnClose.addEventListener('click', () => closeModal());\n  } catch (error) {\n    console.error('Error fetching book details:', error);\n  }\n}\n\nfunction closeModal() {\n  modalEl.classList.remove('modal--show');\n  document.body.classList.remove('stop-scrolling');\n}\n\nfunction getCart() {\n  return JSON.parse(localStorage.getItem('cart')) || [];\n}\n\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\nfunction isBookInCart(book) {\n  const cart = getCart();\n  return cart.some(\n    item => item.title === book.title && item.author === book.author\n  );\n}\n\nfunction removeFromCart(book) {\n  let cart = getCart();\n  cart = cart.filter(\n    item => !(item.title === book.title && item.author === book.author)\n  );\n  saveCart(cart);\n  console.log('book removed:', book.title);\n}\n\nfunction addToCart(book) {\n  let cart = getCart();\n  cart.push(book);\n  saveCart(cart);\n  console.log('book added:', book.title);\n}\n\nconsole.log('shoping:', getCart());\n"],"names":["API_URL_POPULAR","container","booksEl","getBooks","url","responseData","category","renderCategory","error","categoryContainer","categoryEl","booksGroup","i","book","renderBook","bookEl","openBookModal","modalEl","bookId","bookUrl","bookData","isBookInCart","btnAction","removeFromCart","addToCart","closeModal","getCart","saveCart","cart","item"],"mappings":"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"}